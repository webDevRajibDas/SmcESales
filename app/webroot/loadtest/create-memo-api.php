<?php
require 'db_connection.php';
date_default_timezone_set('Asia/Dhaka');
ini_set('memory_limit', '-1');
ini_set('max_execution_time', '0');


$ch = curl_init('http://20.2.208.8/api_data178_retrives/create_memo.json');
// $ch = curl_init('http://192.168.0.16:8080/smc_sales/api_data_retrives/get_current_stock.json');		
// $ch = curl_init('http://localhost/rancon_chita/sms_api/get_pending_outbox.json');		
// $ch = curl_init('http://localhost/rancon_chita/api_data_retrives/get_target.json');		
// $ch = curl_init('http://182.160.103.236:8079/api_data_retrives/create_deposit.json');		
// $ch = curl_init('http://182.160.103.236:8079/api_data_retrives/challan_received.json');		
// $ch = curl_init('http://182.160.103.236:8079/api_data_retrives/create_memo.json');
// $ch = curl_init('http://182.160.103.236:8079/smc_sales_area/api_data_retrives/create_deposit.json');
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
/*curl_setopt($ch, CURLOPT_POSTFIELDS,'
      {"delete_memos":[
      {"memo_no":"155311218333"}
      ]}');	*/

curl_setopt($ch, CURLOPT_POSTFIELDS, '{"memo_list":{"memo_no":"20430232601110007","memo_date":"2023-01-26 11:00:07","sales_person_id":"20430","outlet_id":"771612","market_id":"164100","territory_id":"103","gross_value":"20509.00","cash_recieved":"20509.00","latitude":"0.0","longitude":"0.0","from_app":"1","isDistibutor":"0","total_discount":"458.4","store_id":"126","mac":"c359e15b-7a9b-41f4-a147-5b09c906e384","so_id":"20430","memo_details":[{"product_id":"35","current_inventory_id":"","product_type":"0","measurement_unit_id":"7","sales_qty_in_dispencer":"1","sales_qty":"1","price":"600","product_price_id":"0","bonus_qty":"0","virtual_product_id":"0","is_bonus":"1","bonus_product_id":"","bonus_inventory_id":"0","vat":"0","price_id":"","combination_id":"288","discount_type":"","discount_amount":"0","selected_set":"","provided_qty":""},{"product_id":"39","current_inventory_id":"","product_type":"0","measurement_unit_id":"7","sales_qty_in_dispencer":"1","sales_qty":"1","price":"652","product_price_id":"0","bonus_qty":"0","virtual_product_id":"0","is_bonus":"1","bonus_product_id":"","bonus_inventory_id":"0","vat":"0","price_id":"","combination_id":"288","discount_type":"","discount_amount":"0","selected_set":"","provided_qty":""},{"product_id":"51","current_inventory_id":"","product_type":"0","measurement_unit_id":"6","sales_qty_in_dispencer":"48.0","sales_qty":"48","price":"50","product_price_id":"0","bonus_qty":"0","virtual_product_id":"0","is_bonus":"1","bonus_product_id":"","bonus_inventory_id":"0","vat":"0","price_id":"","combination_id":"288","discount_type":"0","discount_amount":"5","selected_set":"","provided_qty":""},{"product_id":"52","current_inventory_id":"","product_type":"0","measurement_unit_id":"6","sales_qty_in_dispencer":"24.0","sales_qty":"24","price":"31","product_price_id":"0","bonus_qty":"0","virtual_product_id":"0","is_bonus":"1","bonus_product_id":"","bonus_inventory_id":"0","vat":"0","price_id":"","combination_id":"288","discount_type":"0","discount_amount":"3.1","selected_set":"","provided_qty":""},{"product_id":"451","current_inventory_id":"","product_type":"0","measurement_unit_id":"6","sales_qty_in_dispencer":"16.0","sales_qty":"16","price":"90","product_price_id":"0","bonus_qty":"0","virtual_product_id":"0","is_bonus":"1","bonus_product_id":"","bonus_inventory_id":"0","vat":"0","price_id":"","combination_id":"288","discount_type":"0","discount_amount":"9","selected_set":"","provided_qty":""},{"product_id":"53","current_inventory_id":"","product_type":"0","measurement_unit_id":"6","sales_qty_in_dispencer":"24.0","sales_qty":"24","price":"58","product_price_id":"0","bonus_qty":"0","virtual_product_id":"0","is_bonus":"1","bonus_product_id":"","bonus_inventory_id":"0","vat":"0","price_id":"","combination_id":"288","discount_type":"","discount_amount":"0","selected_set":"","provided_qty":""},{"product_id":"450","current_inventory_id":"","product_type":"0","measurement_unit_id":"6","sales_qty_in_dispencer":"24.0","sales_qty":"24","price":"32","product_price_id":"0","bonus_qty":"0","virtual_product_id":"0","is_bonus":"1","bonus_product_id":"","bonus_inventory_id":"0","vat":"0","price_id":"","combination_id":"288","discount_type":"","discount_amount":"0","selected_set":"","provided_qty":""},{"product_id":"353","current_inventory_id":"","product_type":"0","measurement_unit_id":"6","sales_qty_in_dispencer":"24.0","sales_qty":"24","price":"108","product_price_id":"0","bonus_qty":"0","virtual_product_id":"0","is_bonus":"1","bonus_product_id":"","bonus_inventory_id":"0","vat":"15","price_id":"","combination_id":"288","discount_type":"","discount_amount":"0","selected_set":"","provided_qty":""},{"product_id":"354","current_inventory_id":"","product_type":"0","measurement_unit_id":"6","sales_qty_in_dispencer":"24.0","sales_qty":"24","price":"108","product_price_id":"0","bonus_qty":"0","virtual_product_id":"0","is_bonus":"1","bonus_product_id":"","bonus_inventory_id":"0","vat":"15","price_id":"","combination_id":"288","discount_type":"","discount_amount":"0","selected_set":"","provided_qty":""},{"product_id":"505","current_inventory_id":"","product_type":"0","measurement_unit_id":"6","sales_qty_in_dispencer":"3.0","sales_qty":"3","price":"730","product_price_id":"0","bonus_qty":"0","virtual_product_id":"0","is_bonus":"1","bonus_product_id":"","bonus_inventory_id":"0","vat":"15","price_id":"","combination_id":"288","discount_type":"","discount_amount":"0","selected_set":"","provided_qty":""},{"product_id":"506","current_inventory_id":"","product_type":"0","measurement_unit_id":"6","sales_qty_in_dispencer":"3.0","sales_qty":"3","price":"730","product_price_id":"0","bonus_qty":"0","virtual_product_id":"0","is_bonus":"1","bonus_product_id":"","bonus_inventory_id":"0","vat":"15","price_id":"","combination_id":"288","discount_type":"","discount_amount":"0","selected_set":"","provided_qty":""},{"product_id":"48","current_inventory_id":"","product_type":"0","measurement_unit_id":"7","sales_qty_in_dispencer":"2","sales_qty":"2","price":"64.5","product_price_id":"0","bonus_qty":"0","virtual_product_id":"0","is_bonus":"1","bonus_product_id":"","bonus_inventory_id":"0","vat":"15","price_id":"","combination_id":"288","discount_type":"","discount_amount":"0","selected_set":"","provided_qty":""},{"product_id":"339","current_inventory_id":"","product_type":"0","measurement_unit_id":"6","sales_qty_in_dispencer":"1.0","sales_qty":"1","price":"300","product_price_id":"0","bonus_qty":"0","virtual_product_id":"0","is_bonus":"1","bonus_product_id":"","bonus_inventory_id":"0","vat":"15","price_id":"","combination_id":"288","discount_type":"","discount_amount":"0","selected_set":"","provided_qty":""},{"product_id":"644","current_inventory_id":"","product_type":"0","measurement_unit_id":"7","sales_qty_in_dispencer":"20","sales_qty":"20","price":"126","product_price_id":"0","bonus_qty":"0","virtual_product_id":"648","is_bonus":"1","bonus_product_id":"","bonus_inventory_id":"0","vat":"15","price_id":"","combination_id":"288","discount_type":"","discount_amount":"0","selected_set":"","provided_qty":""},{"product_id":"53","current_inventory_id":"","product_type":"2","measurement_unit_id":"6","sales_qty_in_dispencer":"6.0","sales_qty":"6","price":"0","product_price_id":"0","bonus_qty":"0","virtual_product_id":"0","is_bonus":"3","bonus_product_id":"","bonus_inventory_id":"0","policy_type":"1","policy_id":"369","vat":"","discount_type":"","discount_amount":"0","selected_set":"1","provided_qty":"6"},{"product_id":"450","current_inventory_id":"","product_type":"2","measurement_unit_id":"6","sales_qty_in_dispencer":"6.0","sales_qty":"6","price":"0","product_price_id":"0","bonus_qty":"0","virtual_product_id":"0","is_bonus":"3","bonus_product_id":"","bonus_inventory_id":"0","policy_type":"1","policy_id":"371","vat":"","discount_type":"","discount_amount":"0","selected_set":"1","provided_qty":"6"},{"product_id":"507","current_inventory_id":"","product_type":"2","measurement_unit_id":"6","sales_qty_in_dispencer":"2.0","sales_qty":"2","price":"0","product_price_id":"0","bonus_qty":"0","virtual_product_id":"0","is_bonus":"3","bonus_product_id":"","bonus_inventory_id":"0","policy_type":"1","policy_id":"429","vat":"","discount_type":"","discount_amount":"0","selected_set":"1","provided_qty":"2"},{"product_id":"355","current_inventory_id":"","product_type":"2","measurement_unit_id":"6","sales_qty_in_dispencer":"12.0","sales_qty":"12","price":"0","product_price_id":"0","bonus_qty":"0","virtual_product_id":"0","is_bonus":"3","bonus_product_id":"","bonus_inventory_id":"0","policy_type":"1","policy_id":"430","vat":"","discount_type":"","discount_amount":"0","selected_set":"1","provided_qty":"16"},{"product_id":"356","current_inventory_id":"","product_type":"2","measurement_unit_id":"6","sales_qty_in_dispencer":"4.0","sales_qty":"4","price":"0","product_price_id":"0","bonus_qty":"0","virtual_product_id":"0","is_bonus":"3","bonus_product_id":"","bonus_inventory_id":"0","policy_type":"1","policy_id":"430","vat":"","discount_type":"","discount_amount":"0","selected_set":"1","provided_qty":"16"}],"payment_list":[{"payment_temp_id":"P204300126110007","outlet_id":"771612","memo_no":"20430232601110007","memo_value":"20509.00","credit_or_due":"0.00","payment_amount":"20509.00","inst_type_id":"0","type":"1","tax_amount":"","tax_no":"","instrument_no":"","payment_id":"","inst_no":"","bank_branch_id":"","collect_date":"2023-01-26","memo_date":"2023-01-26","so_id":"20430"}],"memo_details_batch_expire_date":[{"product_id":"35","quantity":"1","batch_no":"21E22","expire_date":"2026-04-01"},{"product_id":"39","quantity":"1","batch_no":"K05220171","expire_date":"2026-07-01"},{"product_id":"51","quantity":"48","batch_no":"014","expire_date":"2027-12-01"},{"product_id":"52","quantity":"24","batch_no":"232","expire_date":"2027-09-01"},{"product_id":"451","quantity":"16","batch_no":"268","expire_date":"2027-11-01"},{"product_id":"53","quantity":"24","batch_no":"005","expire_date":"2027-12-01"},{"product_id":"450","quantity":"24","batch_no":"136","expire_date":"2027-07-01"},{"product_id":"353","quantity":"24","batch_no":"067","expire_date":"2025-09-01"},{"product_id":"354","quantity":"24","batch_no":"041","expire_date":"2025-09-01"},{"product_id":"505","quantity":"3","batch_no":"079","expire_date":"2025-10-01"},{"product_id":"506","quantity":"3","batch_no":"054","expire_date":"2025-10-01"},{"product_id":"48","quantity":"2","batch_no":"148","expire_date":"2024-09-01"},{"product_id":"339","quantity":"1","batch_no":"061","expire_date":"2024-08-31"},{"product_id":"648","quantity":"20","batch_no":"16381-16412","expire_date":"2026-11-01"},{"product_id":"53","quantity":"6","batch_no":"005","expire_date":"2027-12-01"},{"product_id":"450","quantity":"6","batch_no":"136","expire_date":"2027-07-01"},{"product_id":"507","quantity":"2","batch_no":"024","expire_date":"2025-10-01"},{"product_id":"355","quantity":"12","batch_no":"027","expire_date":"2025-11-01"},{"product_id":"356","quantity":"4","batch_no":"002","expire_date":"2025-08-01"}],"credit_collection":[],"intrument_value":[],"deposit_value":[]}}');
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
//curl_setopt($ch, CURLOPT_HTTPHEADER,'Content-type: application/json');
$result = curl_exec($ch);
curl_close($ch);  // Seems like good practice
echo '<pre>';
echo $result;
